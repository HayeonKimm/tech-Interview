
-----------------
type-1   
이벤트 루프란, 

싱글 스레드로 도는 자바스크립트가 비동기 함수를 핸들링 하기 위한 동시성 모델이자 디자인 패턴입니다.

자바스크립트 엔진은 싱글스레드 기반이기 때문에 하나의 call stack만 가지고 있습니다. 그렇기 때문에 한번에 하나의 동작만을 처리할 수 있습니다.

하지만 브라우저와 node가 동작하는것을 보면 많은 부분이 동시에 처리 되는 것처럼 보이는데

브라우저, Node 환경에서 각각 이벤트 루프가 존재해 비동기 작업을 처리하기 때문입니다.


type-2

자바스크립트는 싱글쓰레드 언어이다.


자바스크립트 엔진은 하나의 call stack을 가지고 있기때문에 한번에 하나의 동작만을 처리할 수 있습니다. 그런데 브라우저가 동작하는것을 보면 많은 부분이 동시에 처리 되는 것처럼 느껴진다.

이와같이 자바스크립트의 동시성을 지원하는 것이 이벤트 루프이다.

브라우저 환경에는 자바스크립트 엔진과 call stack 말고도 web API와 event loop 그리고 task queue가 있어 비동기 처리가 가능하다.

자바스크립트의 코드가 실행되면 비동기 호출에 대한 처리를 브라우저에서 web API로 넘기고 동기적인 처리를 call stack에 담아 먼저 처리하게 된다.

이후에 비동기 호출에 대한 처리가 끝나면 web API는 비동기 호출의 콜백 함수를 task queue에 담게 되고 Event Loop는 call stack이 비어있는지 확인하고,  

call stack이 비어 있다면 task queue에 있는 함수를 call stack으로 넘겨주는 역할을 한다.



-----------------

이벤트 루프 순서   

1. 먼저 실행 코드들이 호출스택에 쌓인다.

2. 실행 코드중 백그라운드가 필요한 작업은 백그라운드공간으로 이동하고, 순차적으로 호출스택이 진행된다.

3. 백그라운드에서 자체적으로 작업완료된 콜백함수는 태스크큐로 이동하여 대기한다.

4. 호출 스택들이 완료되면 이벤트 루프(Event Loop) 가 태스크 큐에 있는 콜백을 순서대로 호출스택에 올린다.

5. 호출스택이 완료되면 이벤트루프(Event Loop) 가 돌면서 태스크 큐에 있는 콜백을 실행시키고,

6. 태스크 큐에 아무것도 없다면, 이벤트가 올때까지 대기한다.
