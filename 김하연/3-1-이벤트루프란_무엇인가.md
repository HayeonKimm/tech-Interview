이벤트 루프에 관해 (Event loop)

싱글 스레드로 도는 자바스크립트가 비동기 함수를 핸들링 하기 위한 동시성 모델이자 디자인 패턴입니다.

브라우저, Node 환경에서 각각 이벤트 루프가 존재해 비동기 작업을 처리합니다.

콜스택이 빌 때 마다 태스크 큐에서 대기하던 콜백함수가 콜스택으로 넘어와 실행되는 방식입니다.


-----------------


우선 자바스크립트는 싱글쓰레드 언어입니다. 

자바스크립트 엔진은 하나의 call stack을 가지고 있기때문에 한번에 하나의 동작만을 처리할 수 있습니다.

그런데 브라우저가 동작하는것을 보면 많은 부분이 동시에 처리 되는 것처럼 느껴집니다.

이와같이 자바스크립트의 동시성을 지원하는 것이 이벤트 루프입니다.

브라우저 환경에는 자바스크립트 엔진과 call stack 말고도 web API와 event loop 그리고 task queue가 있어 비동기 처리가 가능합니다.

자바스크립트의 코드가 실행되면 비동기 호출에 대한 처리를 브라우저에서 web API로 넘기고 동기적인 처리를 call stack에 담아 먼저 처리하게 됩니다. 

이후에 비동기 호출에 대한 처리가 끝나면 web API는 비동기 호출의 콜백 함수를 task queue에 담게 되고 Event Loop는 call stack이 비어있는지 확인하고,

call stack이 비어 있다면 task queue에 있는 함수를 call stack으로 넘겨주는 역할을 합니다.
